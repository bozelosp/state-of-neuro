# configs/default.yaml

version: 1
include: config_schema.yaml

paths:
  repo_root: ..
  data_root: ../data
  generated_root: ../artifacts

steps:
  source_acquisition:
    listing_path: ../data/raw/pubmed_2025.html
    listing_url: https://ftp.ncbi.nlm.nih.gov/pubmed/baseline/
    default_year: 2025
    manifest_directory: ../artifacts/manifests
    ftp_base_url: https://ftp.ncbi.nlm.nih.gov/pubmed/baseline/
    manifest_name_template: pubmed_baseline_files_{year}.csv
    download_dir: ../artifacts/pubmed_baseline
    max_files: 3
    verify_md5: true
  filter_neuroscience_journals:
    input_csv: ../data/journal_files/scimagojr_2023.csv
    output_csv: ../artifacts/journals/neuroscience_only.csv
    area_name: neuroscience
    areas_column: Areas
    metric_column: "Cites / Doc. (2years)"
    delimiter: ";"
  abstract_ingestion:
    input_dir: ../data/raw
    output_dir: ../artifacts/abstracts
    min_abstract_length: 450
    batch_size: 200000
    metadata_output: ../artifacts/abstracts/hash_id_to_metadata.pkl
    manifest_path: ../artifacts/abstracts/hash_id_manifest.csv
    hash_fields:
      - title
      - abstract
      - doi
      - journal
  keyword_generation:
    input_dir: ../artifacts/abstracts
    output_dir: ../artifacts/keywords
    responses_path: ../tests/fixtures/keywords/responses.json
    prompt_path: ../configs/keyword_prompt.json
    max_concurrency: 32
  keyword_aggregation:
    keywords_dir: ../artifacts/keywords
    metadata_path: ../artifacts/abstracts/hash_id_to_metadata.pkl
    output_dir: ../artifacts/keywords/aggregated
    top_n: 15000
  embedding_generation:
    input_dir: ../artifacts/abstracts
    output_dir: ../data/embeddings_raw
    responses_path: ../tests/fixtures/embeddings/responses.json
    max_concurrency: 32
  embedding_preparation:
    input_dir: ../data/embeddings_raw
    output_dir: ../artifacts/embeddings
    embed_dim: 800
    block_size: 50000
  topic_trends:
    authoritative_clusters_path: ../artifacts/master/MASTER_TAG_CLUSTERS.json
    metadata_path: ../artifacts/abstracts/hash_id_to_metadata.pkl
    output_dir: ../artifacts/topic_trends
    master_tag_clusters_path: ../artifacts/master/MASTER_TAG_CLUSTERS.json
    case_variants_path: ../artifacts/topic_trends/tag_case_variants.json
    apply_excluded_tags: false
    miscellaneous_limit: 300
    min_frequency: 24
  frontend_export:
    output_dir: ../artifacts/web_exports
    schema_version: 1
  trend_pipeline:
    scenario: local_repro

logging:
  level: INFO
